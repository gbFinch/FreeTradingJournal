import type { Account, Trade } from '@/types';

// Generate a date string N days ago from today
function daysAgo(days: number): string {
  const date = new Date();
  date.setDate(date.getDate() - days);
  return date.toISOString().split('T')[0];
}

// Generate a UUID-like string
function generateId(): string {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {
    const r = (Math.random() * 16) | 0;
    const v = c === 'x' ? r : (r & 0x3) | 0x8;
    return v.toString(16);
  });
}

const DEFAULT_USER_ID = 'mock-user-001';
const DEFAULT_ACCOUNT_ID = 'mock-account-001';

export const mockAccounts: Account[] = [
  {
    id: DEFAULT_ACCOUNT_ID,
    user_id: DEFAULT_USER_ID,
    name: 'Main Trading Account',
    base_currency: 'USD',
    created_at: daysAgo(90),
  },
];

// Sample trades with realistic data spanning last 30 days
export const mockTrades: Trade[] = [
  // Recent winning trades
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'AAPL',
    symbol: 'AAPL',
    trade_number: 1,
    trade_date: daysAgo(1),
    direction: 'long',
    quantity: 100,
    entry_price: 178.50,
    exit_price: 182.30,
    stop_loss_price: 176.00,
    entry_time: '09:35:00',
    exit_time: '14:22:00',
    fees: 2.00,
    strategy: 'Breakout',
    notes: 'Clean breakout above resistance',
    status: 'closed',
    created_at: daysAgo(1),
    updated_at: daysAgo(1),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'NVDA',
    symbol: 'NVDA',
    trade_number: 2,
    trade_date: daysAgo(2),
    direction: 'long',
    quantity: 50,
    entry_price: 875.00,
    exit_price: 892.50,
    stop_loss_price: 865.00,
    entry_time: '10:15:00',
    exit_time: '15:30:00',
    fees: 2.00,
    strategy: 'Momentum',
    notes: 'Strong relative strength',
    status: 'closed',
    created_at: daysAgo(2),
    updated_at: daysAgo(2),
  },
  // A losing trade
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'TSLA',
    symbol: 'TSLA',
    trade_number: 3,
    trade_date: daysAgo(3),
    direction: 'long',
    quantity: 30,
    entry_price: 245.00,
    exit_price: 238.50,
    stop_loss_price: 240.00,
    entry_time: '09:45:00',
    exit_time: '11:20:00',
    fees: 2.00,
    strategy: 'Gap and Go',
    notes: 'Stopped out - false breakout',
    status: 'closed',
    created_at: daysAgo(3),
    updated_at: daysAgo(3),
  },
  // Short trade - win
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'META',
    symbol: 'META',
    trade_number: 4,
    trade_date: daysAgo(4),
    direction: 'short',
    quantity: 40,
    entry_price: 515.00,
    exit_price: 498.00,
    stop_loss_price: 525.00,
    entry_time: '10:30:00',
    exit_time: '14:45:00',
    fees: 2.00,
    strategy: 'Reversal',
    notes: 'Bearish engulfing at resistance',
    status: 'closed',
    created_at: daysAgo(4),
    updated_at: daysAgo(4),
  },
  // Breakeven trade
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'AMD',
    symbol: 'AMD',
    trade_number: 5,
    trade_date: daysAgo(5),
    direction: 'long',
    quantity: 75,
    entry_price: 155.00,
    exit_price: 155.03,
    stop_loss_price: 152.00,
    entry_time: '09:40:00',
    exit_time: '12:00:00',
    fees: 2.25,
    strategy: 'Range',
    notes: 'Scratched trade - no follow through',
    status: 'closed',
    created_at: daysAgo(5),
    updated_at: daysAgo(5),
  },
  // Week 2 trades
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'MSFT',
    symbol: 'MSFT',
    trade_number: 6,
    trade_date: daysAgo(7),
    direction: 'long',
    quantity: 60,
    entry_price: 418.00,
    exit_price: 425.50,
    stop_loss_price: 414.00,
    entry_time: '09:35:00',
    exit_time: '15:55:00',
    fees: 2.00,
    strategy: 'Trend Follow',
    notes: 'Rode the trend all day',
    status: 'closed',
    created_at: daysAgo(7),
    updated_at: daysAgo(7),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'GOOGL',
    symbol: 'GOOGL',
    trade_number: 7,
    trade_date: daysAgo(8),
    direction: 'long',
    quantity: 45,
    entry_price: 175.50,
    exit_price: 172.00,
    stop_loss_price: 173.00,
    entry_time: '10:00:00',
    exit_time: '13:30:00',
    fees: 2.00,
    strategy: 'Breakout',
    notes: 'Failed breakout, hit stop',
    status: 'closed',
    created_at: daysAgo(8),
    updated_at: daysAgo(8),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'AMZN',
    symbol: 'AMZN',
    trade_number: 8,
    trade_date: daysAgo(9),
    direction: 'long',
    quantity: 35,
    entry_price: 185.00,
    exit_price: 191.25,
    stop_loss_price: 182.00,
    entry_time: '09:50:00',
    exit_time: '14:15:00',
    fees: 2.00,
    strategy: 'Momentum',
    notes: 'Earnings momentum play',
    status: 'closed',
    created_at: daysAgo(9),
    updated_at: daysAgo(9),
  },
  // Short loss
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'SPY',
    symbol: 'SPY',
    trade_number: 9,
    trade_date: daysAgo(10),
    direction: 'short',
    quantity: 100,
    entry_price: 580.00,
    exit_price: 585.50,
    stop_loss_price: 584.00,
    entry_time: '10:15:00',
    exit_time: '11:45:00',
    fees: 2.00,
    strategy: 'Reversal',
    notes: 'Wrong read on market direction',
    status: 'closed',
    created_at: daysAgo(10),
    updated_at: daysAgo(10),
  },
  // Week 3 trades
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'NFLX',
    symbol: 'NFLX',
    trade_number: 10,
    trade_date: daysAgo(12),
    direction: 'long',
    quantity: 25,
    entry_price: 680.00,
    exit_price: 695.00,
    stop_loss_price: 670.00,
    entry_time: '09:45:00',
    exit_time: '14:30:00',
    fees: 2.00,
    strategy: 'Gap and Go',
    notes: 'Gap up continuation',
    status: 'closed',
    created_at: daysAgo(12),
    updated_at: daysAgo(12),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'CRM',
    symbol: 'CRM',
    trade_number: 11,
    trade_date: daysAgo(14),
    direction: 'long',
    quantity: 50,
    entry_price: 295.00,
    exit_price: 301.50,
    stop_loss_price: 291.00,
    entry_time: '10:00:00',
    exit_time: '15:00:00',
    fees: 2.00,
    strategy: 'Trend Follow',
    notes: 'Strong sector day',
    status: 'closed',
    created_at: daysAgo(14),
    updated_at: daysAgo(14),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'AAPL',
    symbol: 'AAPL',
    trade_number: 12,
    trade_date: daysAgo(15),
    direction: 'long',
    quantity: 80,
    entry_price: 176.00,
    exit_price: 174.50,
    stop_loss_price: 174.00,
    entry_time: '09:35:00',
    exit_time: '10:45:00',
    fees: 2.00,
    strategy: 'Breakout',
    notes: 'Stopped out early',
    status: 'closed',
    created_at: daysAgo(15),
    updated_at: daysAgo(15),
  },
  // Week 4 trades
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'QQQ',
    symbol: 'QQQ',
    trade_number: 13,
    trade_date: daysAgo(18),
    direction: 'short',
    quantity: 80,
    entry_price: 505.00,
    exit_price: 498.00,
    stop_loss_price: 510.00,
    entry_time: '10:30:00',
    exit_time: '14:00:00',
    fees: 2.00,
    strategy: 'Reversal',
    notes: 'Bearish day, rode it down',
    status: 'closed',
    created_at: daysAgo(18),
    updated_at: daysAgo(18),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'NVDA',
    symbol: 'NVDA',
    trade_number: 14,
    trade_date: daysAgo(20),
    direction: 'long',
    quantity: 40,
    entry_price: 860.00,
    exit_price: 878.00,
    stop_loss_price: 850.00,
    entry_time: '09:40:00',
    exit_time: '15:45:00',
    fees: 2.00,
    strategy: 'Momentum',
    notes: 'AI sector strength',
    status: 'closed',
    created_at: daysAgo(20),
    updated_at: daysAgo(20),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'TSLA',
    symbol: 'TSLA',
    trade_number: 15,
    trade_date: daysAgo(21),
    direction: 'long',
    quantity: 50,
    entry_price: 250.00,
    exit_price: 258.00,
    stop_loss_price: 245.00,
    entry_time: '09:35:00',
    exit_time: '13:20:00',
    fees: 2.00,
    strategy: 'Gap and Go',
    notes: 'Strong open, locked in gains',
    status: 'closed',
    created_at: daysAgo(21),
    updated_at: daysAgo(21),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'AMD',
    symbol: 'AMD',
    trade_number: 16,
    trade_date: daysAgo(22),
    direction: 'long',
    quantity: 100,
    entry_price: 152.00,
    exit_price: 148.50,
    stop_loss_price: 149.00,
    entry_time: '10:00:00',
    exit_time: '11:30:00',
    fees: 2.00,
    strategy: 'Breakout',
    notes: 'Broke down instead of up',
    status: 'closed',
    created_at: daysAgo(22),
    updated_at: daysAgo(22),
  },
  // Final week trades
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'META',
    symbol: 'META',
    trade_number: 17,
    trade_date: daysAgo(25),
    direction: 'long',
    quantity: 30,
    entry_price: 505.00,
    exit_price: 518.00,
    stop_loss_price: 498.00,
    entry_time: '09:45:00',
    exit_time: '15:30:00',
    fees: 2.00,
    strategy: 'Trend Follow',
    notes: 'Strong relative strength',
    status: 'closed',
    created_at: daysAgo(25),
    updated_at: daysAgo(25),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'MSFT',
    symbol: 'MSFT',
    trade_number: 18,
    trade_date: daysAgo(27),
    direction: 'long',
    quantity: 45,
    entry_price: 415.00,
    exit_price: 412.00,
    stop_loss_price: 411.00,
    entry_time: '10:15:00',
    exit_time: '12:00:00',
    fees: 2.00,
    strategy: 'Range',
    notes: 'Stopped out at support',
    status: 'closed',
    created_at: daysAgo(27),
    updated_at: daysAgo(27),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'GOOGL',
    symbol: 'GOOGL',
    trade_number: 19,
    trade_date: daysAgo(28),
    direction: 'short',
    quantity: 60,
    entry_price: 178.00,
    exit_price: 172.50,
    stop_loss_price: 182.00,
    entry_time: '09:50:00',
    exit_time: '14:20:00',
    fees: 2.00,
    strategy: 'Reversal',
    notes: 'Weak relative strength, shorted breakdown',
    status: 'closed',
    created_at: daysAgo(28),
    updated_at: daysAgo(28),
  },
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'AMZN',
    symbol: 'AMZN',
    trade_number: 20,
    trade_date: daysAgo(29),
    direction: 'long',
    quantity: 40,
    entry_price: 182.00,
    exit_price: 186.50,
    stop_loss_price: 179.00,
    entry_time: '09:35:00',
    exit_time: '15:50:00',
    fees: 2.00,
    strategy: 'Momentum',
    notes: 'Full day hold, great move',
    status: 'closed',
    created_at: daysAgo(29),
    updated_at: daysAgo(29),
  },
  // Open trade (no derived fields)
  {
    id: generateId(),
    user_id: DEFAULT_USER_ID,
    account_id: DEFAULT_ACCOUNT_ID,
    instrument_id: 'AAPL',
    symbol: 'AAPL',
    trade_number: 21,
    trade_date: daysAgo(0),
    direction: 'long',
    quantity: 50,
    entry_price: 183.00,
    exit_price: null,
    stop_loss_price: 180.00,
    entry_time: '09:40:00',
    exit_time: null,
    fees: 1.00,
    strategy: 'Breakout',
    notes: 'Entered on breakout, still holding',
    status: 'open',
    created_at: daysAgo(0),
    updated_at: daysAgo(0),
  },
];
